<?xml version="1.0"?>
<launch xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://gist.githubusercontent.com/nalt/dfa2abc9d2e3ae4feb82ca5608090387/raw/roslaunch.xsd">

    <!-- ARGS -->
    <arg
        name="no_rgb" default="false" />
    <arg name="no_rgbd" default="false" />
    <arg name="no_robots"
        default="false" />
    <arg name="no_rrc" default="false" />
    <arg name="no_rws" default="false" />
    <arg
        name="no_record" default="false" />

    <!-- INCLUDES -->
    <include file="$(dirname)/bringup/rgbd.launch"
        pass_all_args="true" unless="$(arg no_rgbd)" />

    <include file="$(dirname)/bringup/rgb.launch"
        pass_all_args="true" unless="$(arg no_rgb)" />

    <include
        file="$(dirname)/bringup/robots.launch" pass_all_args="true" unless="$(arg no_robots)" />

    <!-- RECORD -->
    <node
        name="record" pkg="rosbag" type="record"
        args="--all --publish --output-prefix=$(env HOME)/rosbags/$(optenv HOSTNAME no_env_hostname) --split
    --duration=2h --lz4"
        unless="$(arg no_record)" />
    <node name="store_pointclouds" pkg="pcl_ros" type="pointcloud_to_pcd">
        <remap from="input" to="/points" />
        <param name="fixed_frame" value="world" />
        <param name="prefix" value="$(env HOME)/pcds/" />
    </node>
</launch>
